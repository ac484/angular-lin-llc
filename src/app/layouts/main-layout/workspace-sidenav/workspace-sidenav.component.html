<app-sidenav>
  <ng-container sidenavLogo>
    <p-menubar [model]="[
      { label: '首頁', icon: 'pi pi-home', routerLink: '/' },
      { 
        label: '節點', icon: 'pi pi-briefcase',
        items: [
          { label: '新增節點', icon: 'pi pi-plus', command: onAddNode }
        ]
      }
    ]"></p-menubar>
  </ng-container>
  <ng-container sidenavHeader>
    <div class="font-bold text-lg">Workspace</div>
  </ng-container>
  <ng-container sidenavBody>
    <p-tree [value]="treeNodes$ | async"
           (onNodeExpand)="onNodeExpand($event)"
           (onNodeSelect)="onNodeSelect($event)"
           (onNodeUnselect)="onNodeUnselect($event)"
           (onNodeContextMenu)="onNodeContextMenu($event)"
           (onNodeDrop)="onNodeDrop($event)"
           [contextMenu]="cm"
           selectionMode="single"
           [(selection)]="selectedNode"
           [draggableNodes]="true"
           [droppableNodes]="true"
           draggableScope="self"
           droppableScope="self"
           [virtualScroll]="true"
           scrollHeight="250px"
           [virtualScrollItemSize]="46"
           [loading]="loading"
           [loadingIcon]="'pi pi-spin pi-spinner'"
           class="w-full"
    ></p-tree>
    <p-contextMenu #cm [model]="contextMenuItems"></p-contextMenu>
  </ng-container>
  <ng-container sidenavFooter>
    <div class="text-xs text-gray-400">Workspace 專屬資訊</div>
  </ng-container>
</app-sidenav>
